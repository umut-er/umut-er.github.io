<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="en" >
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Initial Observations on Newt’s Backend" />
<meta name="author" content="Umut Utku Erşahince" />
<meta property="og:locale" content="en" />
<meta name="description" content="In this blog post, I explain my initial insights into the projects that power Newt." />
<meta property="og:description" content="In this blog post, I explain my initial insights into the projects that power Newt." />
<link rel="canonical" href="http://localhost:4000/posts/initial-observations-on-newt's-backend/" />
<meta property="og:url" content="http://localhost:4000/posts/initial-observations-on-newt's-backend/" />
<meta property="og:site_name" content="Umut Utku Ersahince" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-05-14T23:47:00+03:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Initial Observations on Newt’s Backend" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@Umut Utku Erşahince" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Umut Utku Erşahince","url":"https://github.com/umut-er/"},"dateModified":"2024-05-14T23:47:00+03:00","datePublished":"2024-05-14T23:47:00+03:00","description":"In this blog post, I explain my initial insights into the projects that power Newt.","headline":"Initial Observations on Newt’s Backend","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/posts/initial-observations-on-newt's-backend/"},"url":"http://localhost:4000/posts/initial-observations-on-newt's-backend/"}</script>
<!-- End Jekyll SEO tag -->


  <title>Initial Observations on Newt's Backend | Umut Utku Ersahince
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">

<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Umut Utku Ersahince">
<meta name="application-name" content="Umut Utku Ersahince">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  <!-- Resource Hints -->
  
    
      
        <link rel="preconnect" href="https://fonts.googleapis.com" >
      
        <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
      
    
      
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      
        <link rel="dns-prefetch" href="https://fonts.gstatic.com" >
      
    
      
        <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
      
    
  

  <!-- Bootstrap -->
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  

  <!-- Theme style -->
  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  <!-- Web Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css">

  <!-- 3rd-party Dependencies -->

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.25.0/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Image Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css">
  

  <!-- JavaScript -->

  
    <!-- Switch the mode between dark and light. -->

<script type="text/javascript">
  class ModeToggle {
    static get MODE_KEY() {
      return 'mode';
    }
    static get MODE_ATTR() {
      return 'data-mode';
    }
    static get DARK_MODE() {
      return 'dark';
    }
    static get LIGHT_MODE() {
      return 'light';
    }
    static get ID() {
      return 'mode-toggle';
    }

    constructor() {
      let self = this;this.sysDarkPrefers.addEventListener('change', () => {
        if (self.hasMode) {
          self.clearMode();
        }
        self.notify();
      });

      if (!this.hasMode) {
        return;
      }

      if (this.isDarkMode) {
        this.setDark();
      } else {
        this.setLight();
      }
    }

    get sysDarkPrefers() {
      return window.matchMedia('(prefers-color-scheme: dark)');
    }

    get isPreferDark() {
      return this.sysDarkPrefers.matches;
    }

    get isDarkMode() {
      return this.mode === ModeToggle.DARK_MODE;
    }

    get hasMode() {
      return this.mode != null;
    }

    get mode() {
      return sessionStorage.getItem(ModeToggle.MODE_KEY);
    }get modeStatus() {
      if (this.hasMode) {
        return this.mode;
      } else {
        return this.isPreferDark ? ModeToggle.DARK_MODE : ModeToggle.LIGHT_MODE;
      }
    }

    setDark() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
    }

    setLight() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
    }

    clearMode() {
      document.documentElement.removeAttribute(ModeToggle.MODE_ATTR);
      sessionStorage.removeItem(ModeToggle.MODE_KEY);
    }notify() {
      window.postMessage(
        {
          direction: ModeToggle.ID,
          message: this.modeStatus
        },
        '*'
      );
    }

    flipMode() {
      if (this.hasMode) {
        this.clearMode();
      } else {
        if (this.isPreferDark) {
          this.setLight();
        } else {
          this.setDark();
        }
      }

      this.notify();
    }
  }

  const modeToggle = new ModeToggle();
</script>

  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="/assets/img/avatar/avatar2.jpeg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <h1 class="site-title">
      <a href="/">Umut Utku Ersahince</a>
    </h1>
    <p class="site-subtitle fst-italic mb-0">My Personal Blog</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>ARCHIVES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/umut-er"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="https://twitter.com/"
          aria-label="twitter"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fa-brands fa-x-twitter"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['ersahinceumut','gmail.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">Home</a>
            </span>

          
        
          
        
          
            
              <span>Initial Observations on Newt's Backend</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Post
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search id="search" class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->




  
  

  
    
      
      
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  

  


<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  

  
  

  




<!-- return -->




<article class="px-1">
  <header>
    <h1 data-toc-skip>Initial Observations on Newt's Backend</h1>
    
      <p class="post-desc fw-light mb-4">In this blog post, I explain my initial insights into the projects that power Newt.</p>
    

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        Posted
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1715719620"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  May 14, 2024
</time>

      </span>

      <!-- lastmod date -->
      

      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              
                <a href="https://github.com/umut-er/">Umut Utku Erşahince</a>
                
              
            
          </em>
        </span>

        <div>
          <!-- pageviews -->
          

          <!-- read time -->
          <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="1167 words"
>
  <em>6 min</em> read</span>

        </div>
      </div>
    </div>
  </header>

  <div class="content">
    <h2 id="introduction"><span class="me-2">Introduction</span><a href="#introduction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
<p>As a first step into my work, I am trying to understand how <a href="https://github.com/iVis-at-Bilkent/cytoscape.js">ivis-cytoscape</a> and <a href="https://github.com/iVis-at-Bilkent/sbgnviz.js">sbgnviz</a> extend the functionality of the original <a href="https://github.com/cytoscape/cytoscape.js">cytoscape</a> project. I will now try to explain what these extensions are, what they do and why they do what they do.<br />
Just a heads up, the information here might not be accurate / outdated. Please take a look at the documentation / the source code for yourself to confirm if anything looks wrong.</p>

<h2 id="motivation"><span class="me-2">Motivation</span><a href="#motivation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
<p>Cytoscape.js is a well rounded project for many use cases. Many companies / projects have been using this project for many reasons (you can see some of them <a href="https://js.cytoscape.org/#introduction/who-uses-cytoscape.js">here</a>). However, if a project is good for a very broad scenarios, it is very often the case that for very specific scenarios it needs to be extended to fit particular needs. This is the case here. See the picture below:<br />
<a href="/assets/img/PD.svg" class="popup img-link  shimmer"><img src="/assets/img/PD.svg" alt="SBGN Process Description Symbols" loading="lazy"></a>  <br />
This is taken from <a href="https://sbgn.github.io/referencecards">this page</a>. These symbols are the ones used in SBGN Process Description notation. These would be what we want to use as nodes / edges in Newt. However, in order to use these, we need specialized ways to render these symbols and the interactions between objects of these types. This is the motivation of the extension of cytoscape.js.</p>

<h2 id="how-it-is-done"><span class="me-2">How It Is Done</span><a href="#how-it-is-done" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
<p>In this section I will explain how the original cytoscape.js got extended.</p>

<h3 id="what-can-the-original-do"><span class="me-2">What Can the Original Do?</span><a href="#what-can-the-original-do" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<p>Let’s first of all note what cytoscape.js can do in order to talk about what it can’t do / how it is extended. By default, cytoscape.js seems to support a lot of shapes, here are some examples:</p>
<ul>
  <li>Polygon (more on this later!)</li>
  <li>Ellipse</li>
  <li>Round Rectangle</li>
  <li>Cut Rectangle</li>
  <li>Barrel</li>
  <li>Bottom Round Rectangle</li>
  <li>…</li>
</ul>

<p>See <a href="https://js.cytoscape.org/#style/node-body">this</a> for all possibilities. In the source code, these shapes are defined in the <code class="language-plaintext highlighter-rouge">/src/core/extensions/renderer/base/node-shapes.js</code> file. If we look carefully in the source code, we can see that there are only six “drawing strategies”, which are the ones listed above. The last five are pretty straight-forward, but there is more to Polygon than meets the eye. Below is a sample from the source code:</p>
<div class="language-js highlighter-rouge"><div class="code-header">
        <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre></td><td class="rouge-code"><pre><span class="nx">BRp</span><span class="p">.</span><span class="nx">generatePolygon</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">points</span> <span class="p">){</span>
  <span class="k">return </span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeShapes</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">renderer</span><span class="p">:</span> <span class="k">this</span><span class="p">,</span>

    <span class="na">name</span><span class="p">:</span> <span class="nx">name</span><span class="p">,</span>

    <span class="na">points</span><span class="p">:</span> <span class="nx">points</span><span class="p">,</span>

    <span class="na">draw</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">centerX</span><span class="p">,</span> <span class="nx">centerY</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span> <span class="p">){</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nf">nodeShapeImpl</span><span class="p">(</span> <span class="dl">'</span><span class="s1">polygon</span><span class="dl">'</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">centerX</span><span class="p">,</span> <span class="nx">centerY</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">points</span> <span class="p">);</span>
    <span class="p">},</span>

    <span class="na">intersectLine</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">nodeX</span><span class="p">,</span> <span class="nx">nodeY</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">padding</span> <span class="p">){</span>
      <span class="k">return</span> <span class="nx">math</span><span class="p">.</span><span class="nf">polygonIntersectLine</span><span class="p">(</span>
          <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">points</span><span class="p">,</span>
          <span class="nx">nodeX</span><span class="p">,</span>
          <span class="nx">nodeY</span><span class="p">,</span>
          <span class="nx">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
          <span class="nx">padding</span> <span class="p">)</span>
        <span class="p">;</span>
    <span class="p">},</span>

    <span class="na">checkPoint</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">padding</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">centerX</span><span class="p">,</span> <span class="nx">centerY</span> <span class="p">){</span>
      <span class="k">return</span> <span class="nx">math</span><span class="p">.</span><span class="nf">pointInsidePolygon</span><span class="p">(</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">points</span><span class="p">,</span>
        <span class="nx">centerX</span><span class="p">,</span> <span class="nx">centerY</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="nx">padding</span> <span class="p">)</span>
      <span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="p">);</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></div></div>
<p>Polygon is defined as an array of points on the unit square (defined as \([-1,1] \times [-1,1]\)) which are connected one by one (i.e. p1 connects to p2, p2 connects to p3…). All other shapes are defined using the Polygon drawing strategy (for example, the rhombus). As you can see in the source code, the <code class="language-plaintext highlighter-rouge">generatePolygon()</code> function returns an object which has a draw function which uses the ‘polygon’ drawing strategy. Keep this in mind for the following section.</p>

<h3 id="the-problem--the-solution"><span class="me-2">The Problem / The Solution</span><a href="#the-problem--the-solution" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<p>An important (and limiting) feature of the polygon drawing strategy is that there is no way of defining <a href="https://en.wikipedia.org/wiki/B%C3%A9zier_curve">arcs</a> between points. The other drawing strategies are too specific to be used elsewhere, too. So, the problem is that there is no way we can get the shapes we want doing limited modifications / additions to the source code. A complicating factor is that many of these are compound shapes, meaning they contain more than one shape.<br />
The way that this issue got resolved is somewhat interesting. The first step is relatively straightforward. We register our new types (which are <code class="language-plaintext highlighter-rouge">source and sink</code>, <code class="language-plaintext highlighter-rouge">nucleic acid feature</code>, <code class="language-plaintext highlighter-rouge">complex</code>, <code class="language-plaintext highlighter-rouge">macromolecule</code>, <code class="language-plaintext highlighter-rouge">simple chemical</code>, <code class="language-plaintext highlighter-rouge">biological activity</code> and <code class="language-plaintext highlighter-rouge">compartment</code>) into the base cytoscape.js system. Then, we create wrapper functions called <code class="language-plaintext highlighter-rouge">nodeFcnCaller.draw()</code>, <code class="language-plaintext highlighter-rouge">nodeFcnCaller.intersectLine()</code> and <code class="language-plaintext highlighter-rouge">nodeFcnCaller.checkPoint()</code> (See the source code above, exactly the same three functions which are returned from this function!). We modify the source code such that any time we want to call the regular <code class="language-plaintext highlighter-rouge">draw()</code>, <code class="language-plaintext highlighter-rouge">intersectLine()</code> or <code class="language-plaintext highlighter-rouge">checkPoint()</code> methods, we call the wrapper instead. The wrapper functions check that whether these are sbgn shapes, and if they are, calls a different function (which takes in something called an <code class="language-plaintext highlighter-rouge">imgObj</code>, see <code class="language-plaintext highlighter-rouge">cy-modifications.txt</code>) to deal with that case.<br />
I then investigated where these shapes and their methods are defined. And I found … nothing. All clues pointed to <code class="language-plaintext highlighter-rouge">src/sbgn.js</code>, which was just an empty file with a comment:</p>
<div class="language-js highlighter-rouge"><div class="code-header">
        <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c1">// sbgn shapes not supported by cytoscape.js this object will be exposed in cytoscape.js</span>
<span class="c1">// and will be filled in sbgnviz.js</span>

<span class="c1">// TODO: consider filling this object here and remove related things from sbgnviz</span>
</pre></td></tr></tbody></table></code></div></div>
<p>Upon reading this, I investigated sbgnviz.js. From what I gathered, it seems to function as a frontend to this cytoscape.js fork, allowing it to work with higher level sbgn representations, such as sbgnml (stands for sbgn markup language).<br />
What is relevant to us, however, understanding that sbgnviz.js fills in these required functionalities (such as defining sbgn types). This is problematic for the following reasons. Without these functions, this cytoscape.js fork cannot function as a standalone project and always has to be used in conjunction with sbgnviz.js. Another issue is that it is impossible to test some features of the base project, which is what I encountered when I first ran the tests. For this reason, I agreed with the developer who wrote the TODO, and tried to actually do it. I found the required functions and their implementations in <a href="https://github.com/iVis-at-Bilkent/sbgnviz.js/blob/master/src/sbgn-extensions/sbgn-cy-renderer.js">this file</a> and moved them over to sbgn.js.</p>

<h2 id="closing-remarks--future-work"><span class="me-2">Closing Remarks / Future Work</span><a href="#closing-remarks--future-work" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
<p>I would say that the small amount of work I did was relatively successful, and I felt like I learned a lot about the backend of the project. One thing that I am yet to figure out is something called <code class="language-plaintext highlighter-rouge">sbgn.isActive(node)</code>, which is required in some places (see first code sample below), but is not actually in the <code class="language-plaintext highlighter-rouge">sbgn-cy-renderer.js</code> file. I added a temporary function with the same name that always returns false (until I figure out what it actually is), and I am happy to report that the fork actually passes all 514 tests! However, I don’t think there are specific tests for the sbgn features, which one might in the future look to add.</p>

<div class="language-zsh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>~/projects/clones/cytoscape.js <span class="o">(</span>unstable ✔<span class="o">)</span> jsgrep <span class="s2">"isActive"</span>
./src/collection/dimensions/bounds.js:469:      <span class="k">if</span><span class="o">(</span>sbgn.isActive<span class="o">(</span>ele<span class="o">))</span> <span class="o">{</span>
./src/sbgn.js:1370:sbgn.isActive <span class="o">=</span> <span class="k">function</span><span class="o">(</span>node<span class="o">)</span> <span class="o">{</span>
</pre></td></tr></tbody></table></code></div></div>

<p>Note: <code class="language-plaintext highlighter-rouge">jsgrep</code> is a alias around the <code class="language-plaintext highlighter-rouge">grep</code> command that I came up with to speed up my investigation of these huge repositories. It excludes <code class="language-plaintext highlighter-rouge">./dist</code>, <code class="language-plaintext highlighter-rouge">./documentation</code> and <code class="language-plaintext highlighter-rouge">./node_modules</code>. If you are interested, add the snippet below to your terminal source file:</p>

<div class="language-zsh highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c"># javascript project grep command</span>
jsgrep<span class="o">(){</span>
	<span class="nb">grep</span> <span class="nt">--color</span><span class="o">=</span>auto <span class="nt">-r</span> <span class="nt">-n</span> <span class="nv">$1</span> <span class="nt">--exclude-dir</span><span class="o">=</span><span class="s2">"./node_modules"</span> <span class="nt">--exclude-dir</span><span class="o">=</span><span class="s2">"./dist"</span> <span class="nt">--exclude-dir</span><span class="o">=</span><span class="s2">"./documentation"</span> <span class="nt">--exclude-dir</span><span class="o">={</span>.bzr,CVS,.git,.hg,.svn,.idea,.tox<span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    

    <!-- tags -->
    
      <div class="post-tags">
        <i class="fa fa-tags fa-fw me-1"></i>
        
          <a
            href="/tags/gsoc/"
            class="post-tag no-text-decoration"
          >gsoc</a>
        
      </div>
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
          

          This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author.
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">Share</span>
  <span class="share-icons">
    
    
    

    

      

      <a href="https://twitter.com/intent/tweet?text=Initial%20Observations%20on%20Newt's%20Backend%20-%20Umut%20Utku%20Ersahince&url=http%3A%2F%2Flocalhost%3A4000%2Fposts%2Finitial-observations-on-newt%27s-backend%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter">
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    

      

      <a href="https://www.facebook.com/sharer/sharer.php?title=Initial%20Observations%20on%20Newt's%20Backend%20-%20Umut%20Utku%20Ersahince&u=http%3A%2F%2Flocalhost%3A4000%2Fposts%2Finitial-observations-on-newt%27s-backend%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook">
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    

      

      <a href="https://t.me/share/url?url=http%3A%2F%2Flocalhost%3A4000%2Fposts%2Finitial-observations-on-newt%27s-backend%2F&text=Initial%20Observations%20on%20Newt's%20Backend%20-%20Umut%20Utku%20Ersahince" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram">
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="Copy link"
      data-title-succeed="Link copied successfully!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">Recently Updated</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/initial-observations-on-newt's-backend/">Initial Observations on Newt's Backend</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/gsoc/">gsoc</a>
      
    </div>
  </section>


            </div>

            
              
              



  <section id="toc-wrapper" class="d-none ps-0 pe-4">
    <h2 class="panel-heading ps-3 mb-2">Contents</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->















  

  
    











            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <div class="btn btn-outline-primary disabled" aria-label="Older">
      <p>-</p>
    </div>
  

  
    <div class="btn btn-outline-primary disabled" aria-label="Newer">
      <p>-</p>
    </div>
  
</nav>

            
              
              <!-- The comments switcher -->


            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>©
    <time>2024</time>

    
      <a href="https://twitter.com/">Umut Utku Ersahince</a>.
    

    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."
      >Some rights reserved.</span>
    
  </p>

  <p>Using the <a
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="v7.0.0"
        href="https://github.com/cotes2020/jekyll-theme-chirpy"
        target="_blank"
        rel="noopener"
      >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center d-none">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/gsoc/">gsoc</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- JavaScripts -->
    <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->




  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.10/dayjs.min.js,npm/dayjs@1.11.10/locale/en.min.js,npm/dayjs@1.11.10/plugin/relativeTime.min.js,npm/dayjs@1.11.10/plugin/localizedFormat.min.js,npm/tocbot@4.25.0/dist/tocbot.min.js,npm/mermaid@10.8.0/dist/mermaid.min.js"></script>






<script src="/assets/js/dist/post.min.js"></script>


  <!-- MathJax -->
  <script src="/assets/js/data/mathjax.js"></script>
  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-chtml.js"></script>


<!-- Pageviews -->

  

  



  <!-- mermaid-js loader -->
<script type="text/javascript">
  function updateMermaid(event) {
    if (event.source === window && event.data && event.data.direction === ModeToggle.ID) {
      const mode = event.data.message;

      if (typeof mermaid === 'undefined') {
        return;
      }

      let expectedTheme = mode === ModeToggle.DARK_MODE ? 'dark' : 'default';
      let config = { theme: expectedTheme };const mermaidList = document.getElementsByClassName('mermaid');

      [...mermaidList].forEach((elem) => {
        const svgCode = elem.previousSibling.children.item(0).innerHTML;
        elem.innerHTML = svgCode;
        elem.removeAttribute('data-processed');
      });

      mermaid.initialize(config);
      mermaid.init(undefined, '.mermaid');
    }
  }

  (function () {
    let initTheme = 'default';
    const html = document.documentElement;

    if (
      (html.hasAttribute('data-mode') && html.getAttribute('data-mode') === 'dark') ||
      (!html.hasAttribute('data-mode') && window.matchMedia('(prefers-color-scheme: dark)').matches)
    ) {
      initTheme = 'dark';
    }

    let mermaidConf = {
      theme: initTheme};const basicList = document.getElementsByClassName('language-mermaid');
    [...basicList].forEach((elem) => {
      const svgCode = elem.textContent;
      const backup = elem.parentElement;
      backup.classList.add('d-none');let mermaid = document.createElement('pre');
      mermaid.classList.add('mermaid');
      const text = document.createTextNode(svgCode);
      mermaid.appendChild(text);
      backup.after(mermaid);
    });

    mermaid.initialize(mermaidConf);
    window.addEventListener('message', updateMermaid);
  })();
</script>






    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('search-results'),
    json: '/assets/js/data/search.json',
    searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
    noResultsText: '<p class="mt-5">Oops! No results found.</p>',
    templateMiddleware: function(prop, value, template) {
      if (prop === 'categories') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
        }
      }

      if (prop === 'tags') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
        }
      }
    }
  });
</script>

  </body>
</html>

